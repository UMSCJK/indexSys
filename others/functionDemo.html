<!DOCTYPE html>
<html lang="zh-CN">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>考试成绩查询</title>
	<style>*{margin:0;padding:0;font-style:normal;font-family:'微软雅黑',Arial,Helvetica,sans-serif;-webkit-user-select:none;user-select:none;}body{min-width:320px;border-left:1px solid #666;border-right:1px solid #666;}body::-webkit-scrollbar{display:none;}h1#title{margin:8px;font-size:24px;}div#header{height:56px;padding:18px;}div.button,div#header h1,div#header h2{color:#fff;font-weight:normal;}div#header h1{font-size:24px;}div#header h2{font-size:16px;}div#buttons{height:40px;margin:16px 0;text-align:center;}div.button{width:108px;height:40px;margin:0 8px;font-size:20px;transition:0.1s;line-height:40px;text-align:center;border-radius:8px;display:inline-block;border:1px solid #666;}input#name{height:40px;font-size:20px;text-align:center;border-radius:4px;margin-bottom:12px;-webkit-user-select:text;user-select:text;}ul#list li{height:40px;display:flex;padding:0 8px;justify-content:space-between;border-bottom:1px solid #666;}ul#list li span{height:40px;font-size:16px;line-height:40px;}p#ps{text-align:center;}/* 宽>高 (横屏) */@media(orientation:landscape){body{width:400px;margin:auto;border-bottom:1px solid #666;}}/* 宽<=高 (竖屏) */@media(orientation:portrait){body{border:0;width:100vw;overflow-x:hidden;}}/* 极窄时重启横向滚动条 */@media(max-width:320px){body{overflow-x:auto;}}@media(prefers-color-scheme:light){body,input#name{background-color:#fff;}p#ps,ul#list li span,input#name::placeholder{color:#999;}h1#title,input#name{color:#000;}div#header{background-color:#06f;}div.button{background:linear-gradient(to bottom,#06f 75%,#03F);}div.button:hover{background:linear-gradient(to bottom,#05f 75%,#02F);}}@media(prefers-color-scheme:dark){body{background-color:#333;}input#name{background-color:#666;}p#ps,ul#list li span,input#name::placeholder{color:#ccc;}h1#title,input#name{color:#fff;}div#header{background-color:#06c;}div.button{background:linear-gradient(to bottom,#06c 75%,#03c);}div.button:hover{background:linear-gradient(to bottom,#05c 75%,#02c);}}</style>
</head>

<body>
	<style id="remove">
		body {
			border: 0;
			height: 100vh;
			display: flex;
			text-align: center;
			align-items: center;
			justify-content: center;
		}
	</style>
	<div id="container">
		<h1 id="title">某某市某某中学<br />某一模成绩查询</h1>
		<input type="text" id="name" placeholder="请输入姓名"><br />
		<div id="querybtn" class="button">查询</div>
	</div>
	<script>
		// data.js
		const sub = {
			"tot": [15292, 38528, '总分'],
			"chn": [15258, 38443, '语文'],
			"mat": [15240, 38454, '数学'],
			"eng": [12754, 34749, '英语'],
			"jap": [2306, 3493, '日语'],
			"rus": [null, null, '俄语'],
			"his": [15241, 15241, '历史'],
			"phy": [38393, 38393, '物理'],
			"che": [33469, 33469, '化学', '化原'],
			"bio": [26133, 26133, '生物', '生原'],
			"pol": [14209, 6289, '政治', '政原'],
			"geo": [11525, 10872, '地理', '地原']
			// 科目：文考人数、理考人数、名、原；“报考人数”来源于该科0分考生的排名数，有所偏差
		}
		/* const data_structure = {
			"undefined": {
				"cls": undefined,
				"sel": ["undefined", "undefined", "undefined", "undefined"], // 选科 (ABC选科、外语)
				"main": {
					"t": { "t": [undefined, undefined] },                    // 赋分总分 (分数, 市排)
					"y": { "o": [undefined, undefined] },                    // 语文原分 (分数, 市排)
					"s": { "o": [undefined, undefined] },                    // 数学原分 (分数, 市排)
					"w": { "o": [undefined, undefined] },                    // 外语原分 (分数, 市排)
					"a": { "o": [undefined, undefined] },                    // 物理原分 (分数, 市排)
					"b": {                                                   // 化学成绩
						"o": [undefined, undefined],                         // 化学原分 (分数, 市排)
						"t": [undefined, undefined]                          // 化学赋分 (分数, 市排)
					},
					"c": {                                                   // 选科成绩
						"o": [undefined, undefined],                         // 选科原分 (分数, 市排)
						"t": [undefined, undefined]                          // 选科赋分 (分数, 市排)
					}
				}
			}
		} */
		const data = {
			"exam": "2024年某某市高三年级第一次调研考试",
			"title": ["2024年3月", "某某市高三年级第一次调研考试"],
			"schoolName": "某某市某某学校",
			"main": {
				"张三": { "cls": 1, "sel": ["his", "geo", "pol", "eng"], "main": { "t": { "t": [502, 2674] }, "y": { "o": [94, 5230] }, "s": { "o": [81, 499] }, "w": { "o": [105, 4685] }, "a": { "o": [73, 903] }, "b": { "o": [41, 8281], "t": [66, 8281] }, "c": { "o": [67, 3530], "t": [83, 3530] } } },
				"李四": { "cls": 2, "sel": ["phy", "che", "pol", "jap"], "main": { "t": { "t": [425, 24648] }, "y": { "o": [85, 26870] }, "s": { "o": [40, 31876] }, "w": { "o": [116, 411] }, "a": { "o": [50, 20444] }, "b": { "o": [28, 29516], "t": [62, 29099] }, "c": { "o": [56, 4294], "t": [72, 4294] } } },
				"王五": { "cls": 3, "sel": ["his", "geo", "pol", "jap"], "main": { "t": { "t": [379, 9738] }, "y": { "o": [80, 10966] }, "s": { "o": [55, 3125] }, "w": { "o": [38, 2097] }, "a": { "o": [55, 7306] }, "b": { "o": [67, 1077], "t": [86, 1077] }, "c": { "o": [46, 11206], "t": [65, 11206] } } },
				"李华": { "cls": 4, "sel": ["phy", "che", "pol", "eng"], "main": { "t": { "t": [369, 32041] }, "y": { "o": [78, 32982] }, "s": { "o": [28, 36384] }, "w": { "o": [101, 19115] }, "a": { "o": [29, 33953] }, "b": { "o": [32, 27760], "t": [64, 27734] }, "c": { "o": [53, 4840], "t": [69, 4840] } } },
				"赵六": { "cls": 5, "sel": ["phy", "che", "bio", "eng"], "main": { "t": { "t": [451, 20596] }, "y": { "o": [73, 35598] }, "s": { "o": [71, 13640] }, "w": { "o": [97, 20738] }, "a": { "o": [59, 13411] }, "b": { "o": [47, 19199], "t": [73, 19199] }, "c": { "o": [64, 12961], "t": [78, 12313] } } }
			}
		}
		// script.js
		document.getElementById('querybtn').addEventListener('click', function () { query() })
		function getSel(obj) {
			returnData = []
			oSel = data.main[obj].sel
			if (oSel[0] == 'phy') {
				returnData[0] = ['phy', '物理', 1]
			} else if (oSel[0] == 'his') {
				returnData[0] = ['his', '历史', 0]
			}
			if (oSel[1] == 'geo') {
				returnData[1] = ['geo', '地理', '地原']
			} else if (oSel[1] == 'che') {
				returnData[1] = ['che', '化学', '化原']
			}
			if (oSel[2] == 'bio') {
				returnData[2] = ['bio', '生物', '生原']
			} else if (oSel[2] == 'pol') {
				returnData[2] = ['pol', '政治', '政原']
			} else if (oSel[2] == 'geo') {
				returnData[2] = ['geo', '地理', '地原']
			}
			if (oSel[3] == 'eng') {
				returnData[3] = ['eng', '英语']
			} else if (oSel[3] == 'jap') {
				returnData[3] = ['jap', '日语']
			} else if (oSel[3] == 'rus') {
				returnData[3] = ['rus', '俄语']
			}
			return returnData
		}
		function getData(obj) {
			oMn = data.main[obj].main
			oSel = data.main[obj].sel
			var objData = {
				"exam": data.exam,
				"schoolName": data.schoolName,
				"classNum": data.main[obj].cls,
				"name": obj,
				"grd": [        // 分数
					oMn.t.t[0], // 总分
					oMn.y.o[0], // 语文
					oMn.s.o[0], // 数学
					oMn.w.o[0], // 外语
					oMn.a.o[0], // A科
					oMn.b.o[0], // B科原
					oMn.b.t[0], // B科
					oMn.c.o[0], // C科原
					oMn.c.t[0], // C科
				],
				"cty": [        // 排名
					oMn.t.t[1], // 总分
					oMn.y.o[1], // 语文
					oMn.s.o[1], // 数学
					oMn.w.o[1], // 外语
					oMn.a.o[1], // A科
					oMn.b.o[1], // B科原
					oMn.b.t[1], // B科
					oMn.c.o[1], // C科原
					oMn.c.t[1], // C科
				],
				"tna": [                                       // 各科总报考人数
					sub.tot[getSel(obj)[0][2]],                // 总分
					sub.chn[getSel(obj)[0][2]],                // 语文
					sub.mat[getSel(obj)[0][2]],                // 数学
					sub[getSel(obj)[3][0]][getSel(obj)[0][2]], // 外语
					sub[getSel(obj)[0][0]][getSel(obj)[0][2]], // A科
					sub[getSel(obj)[1][0]][getSel(obj)[0][2]], // B科
					sub[getSel(obj)[2][0]][getSel(obj)[0][2]], // C科
				]
			}
			return objData
		}
		function query() {
			iNm = document.getElementById('name').value
			if (iNm == '') {
				alert('请输入考生姓名后查询！')
			} else if (typeof (data.main[iNm]) !== 'object') {
				alert('查无此人！请核对后重试')
			} else {
				objData = getData(iNm)
				document.body.innerHTML = `
				<div id="header"><h1>${data.title[0]}</h1><h2>${data.title[1]}</h2></div>
				<ul id="list">
					<li><span class="sub">姓名</span>
					<span class="data">${objData.name}</span></li>
					<li><span class="sub">班级</span>
					<span class="data">高三 (${objData.classNum}) 班</span></li>
					<li><span class="sub">总分</span>
					<span class="data"><b>${objData.grd[0]}</b> / 750 (${objData.cty[0]} / ${objData.tna[0]})</span></li>
					<li><span class="sub">语文</span>
					<span class="data"><b>${objData.grd[1]}</b> / 150 (${objData.cty[1]} / ${objData.tna[1]})</span></li>
					<li><span class="sub">数学</span>
					<span class="data"><b>${objData.grd[2]}</b> / 150 (${objData.cty[2]} / ${objData.tna[2]})</span></li>
					<li><span class="sub">${getSel(iNm)[3][1]}</span>
					<span class="data"><b>${objData.grd[3]}</b> / 150 (${objData.cty[3]} / ${objData.tna[3]})</span></li>
					<li><span class="sub">${getSel(iNm)[0][1]}</span>
					<span class="data"><b>${objData.grd[4]}</b> / 100 (${objData.cty[4]} / ${objData.tna[4]})</span></li>
					<li><span class="sub">${getSel(iNm)[1][2]}</span>
					<span class="data"><i>${objData.grd[5]}</i> / 100 (${objData.cty[5]} / ${objData.tna[5]})</span></li>
					<li><span class="sub">${getSel(iNm)[1][1]}</span>
					<span class="data"><b>${objData.grd[6]}</b> / 100 (${objData.cty[6]} / ${objData.tna[5]})</span></li>
					<li><span class="sub">${getSel(iNm)[2][2]}</span>
					<span class="data"><i>${objData.grd[7]}</i> / 100 (${objData.cty[7]} / ${objData.tna[6]})</span></li>
					<li><span class="sub">${getSel(iNm)[2][1]}</span>
					<span class="data"><b>${objData.grd[8]}</b> / 100 (${objData.cty[8]} / ${objData.tna[6]})</span></li>
					<li><span class="sub"><b>说明</b></span><span class="data"><b>得分/满分 (排名/报考人数)</b></span></li>
				</ul>
				<div id='buttons'>
					<div id='copy' class="button" onclick='copy()'>复制</div>
					<div id='back' class="button" onclick='javascript:location.reload()'>返回</div>
				</div>
				<p id="ps">加粗分数计入总分<br />各科报考人数来自该科零分考生的排名</p><br />`
			}
		}
		function copy() {
			copyText = `姓名：${objData.name}
班级：高三 (${objData.classNum}) 班
总分：${objData.grd[0]}/750 (${objData.cty[0]}/${objData.tna[0]})
语文：${objData.grd[1]}/150 (${objData.cty[1]}/${objData.tna[1]})
数学：${objData.grd[2]}/150 (${objData.cty[2]}/${objData.tna[2]})
${getSel(iNm)[3][1]}：${objData.grd[3]}/150 (${objData.cty[3]}/${objData.tna[3]})
${getSel(iNm)[0][1]}：${objData.grd[4]}/100 (${objData.cty[4]}/${objData.tna[4]})
${getSel(iNm)[1][2]}：${objData.grd[5]}/100 (${objData.cty[5]}/${objData.tna[5]})
${getSel(iNm)[1][1]}：${objData.grd[6]}/100 (${objData.cty[6]}/${objData.tna[5]})
${getSel(iNm)[2][2]}：${objData.grd[7]}/100 (${objData.cty[7]}/${objData.tna[6]})
${getSel(iNm)[2][1]}：${objData.grd[8]}/100 (${objData.cty[8]}/${objData.tna[6]})
说明：得分/满分 (排名/报考人数)`
			var tempArea = document.createElement("textarea")
			tempArea.value = copyText
			document.body.appendChild(tempArea)
			tempArea.focus()
			tempArea.select()
			document.execCommand('copy')
			document.body.removeChild(tempArea)
			document.getElementById('copy').innerHTML = '复制成功'
			setTimeout(function () { document.getElementById('copy').innerHTML = '复制' }, 1500)
		}</script>
</body>

</html>